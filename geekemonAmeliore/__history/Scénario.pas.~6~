unit Scénario;

interface

uses menuCréation, geekemon, Améliorations, unitéCombat;

type Ganondorf = record
  ATQ : integer;
  PV : integer;
end;

type JonSnow = record
  ATQ : integer;
  PV : integer;
end;

procedure scenarIntroduction1 (var nom1 : string);
procedure scenarIntroduction2(var geekedex : arrayOfGeekemon; var geekEquipe : arrayOfEquipe; var nbPotion : integer; var DressEquipe : arrayOfEquipeDresseur);
procedure quete(var geekedex : arrayOfGeekemon; var geekEquipe : arrayOfEquipe; var nbPotion : integer; var DressEquipe : arrayOfEquipeDresseur; nom1 : string ; avancement : avancementQuete; nomdresseurs : arrayofdresseurs; equipeStockage : arrayofPc; quitter : integer);
procedure tutoriel();
function readVerif(min : integer; max : integer) : integer;

implementation
uses
  System.SysUtils,
  changementSalle;
///////////////////////////
procedure scenarIntroduction1 (var nom1 : string);

 begin
    effacerEcran;
    (*deplacerCurseurXY(25,10);
    attendre(1000);
    writeln ('.');
    deplacerCurseurXY(27,10);
    attendre(1500);
    writeln('.');
    deplacerCurseurXY(29,10);
    attendre(1500);
    writeln('.');
    attendre(1500);
    effacerEcran;
    deplacerCurseurXY(25,10);
    writeln ('Vous vous réveillez dans une zone désertée, à l’air apocalyptique.');
    attendre(3500);
    effacerEcran;
    deplacerCurseurXY(25,10);
    writeln ('Vous n’avez plus aucun souvenir de ce qu’il s’est passé. ');
    attendre(3500);
    effacerEcran;
    deplacerCurseurXY(25,10);
    writeln ('Le lieu ressemble à un parking.');
    deplacerCurseurXY(25,11);
    writeln('Des voitures aux vitres brisées vous entourent, ainsi que des arbres arrachés.');
    attendre(3500);
    effacerEcran;
    deplacerCurseurXY(25,10);
    writeln('Alors que vous vous dirigez vers le bâtiment en face de vous,');
    deplacerCurseurXY(25,11);
    writeln('un homme roux, burné à la peau grise, se dirige vers vous ...');
    attendre(5500);
    effacerEcran;
    deplacerCurseurXY(25,10);
    writeln('et vous charge!');
    attendre(2500);
    effacerEcran;
    attendre(1000);
    writeln ('Vous tentez de fuir quand soudain, un homme légèrement barbu s’interpose,');
    writeln('suivi d’un jeune homme avec un bouc au menton.');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln('« Prends ceci ! » ');
    couleurTexte(15);
    readln;
    effacerEcran;
    writeln ('Il vous équipe d’un bracelet étrange au poignet tandis que le combat commence!');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln('« Je ne peux pas t’expliquer le pourquoi du comment pour l’instant,');
    writeln('mais tu vas devoir apprendre à contrôler l’homme au manteau pour te défendre. »');
    couleurTexte(15);
    readln;
    effacerEcran;
    attendre(800);
    tutoriel();
    effacerEcran;
    attendre(2000);
    deplacerCurseurXY(25,10);
    writeln ('Ganondorf est au sol.');
    attendre(2500);
    effacerEcran;
    attendre(1000);
    couleurTexte(11);
    writeln ('« Suis-moi! »');
    couleurTexte(15);
    readln;
    effacerEcran;
    writeln('Vous rentrez dans le bâtiment. Ce dernier est dévasté..');
    writeln('Vous prenez sur la droite puis montez un escalier.');
    writeln('Vous arrivez devant une porte sur laquelle est écrite « ETDDG ».');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('« Je vais devoir te présenter quelques personnes » ');
    readln;
    effacerEcran;
    writeln('« Au fait, mon nom est Alexis. Comment t’appelles-tu ? ».');
    nom1 := choixNom();
    effacerEcran;
    attendre(1500);
    couleurTexte(15);
    writeln ('Vous rentrez dans la salle');
    readln;
    effacerEcran;
    writeln ('Une dizaine de personnes, toutes avec un bracelet au poignet, tapent sur des ordinateurs,');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('Je te dois des explications après ce combat à l’extérieur.');
    writeln('As-tu une quelconque idée de ce qu’il s’est passé ?');
    couleurTexte(15);
    readln;
    effacerEcran;
    writeln ('Vous secouez la tête.');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('J’imagine qu’un choc t’a fait perdre la mémoire.');
    writeln('Nous sommes ici au département informatique de l’IUT de Dijon. ');
    readln;
    effacerEcran;
    writeln('Les deux créatures qui se sont battues l’extérieur sont nommées « geekemon »');
    writeln('Il en existe de nombreux types,');
    readln;
    effacerEcran;
    writeln('ce sont des clones basés sur des personnages de série et manga… ');
    writeln('Ils ont été créés par un scientifique du département Génie Biologique au nom inconnu. ');
    readln;
    effacerEcran;
    writeln('Il a également développé à l’aide d’informaticiens une technique,');
    writeln('qui permet de les contrôler à l’aide de ce bracelet que tu as au poignet.');
    readln;
    effacerEcran;
    writeln('Mais récemment, une catastrophe a dévasté l’IUT et ses environs. »');
    readln;
    effacerEcran;
    writeln( '« Nous pensons qu’il s’agit d’une erreur de manipulation..');
    writeln('lors de la création d’un nouveau clone, peut-être trop puissant… ');
    readln;
    effacerEcran;
    writeln('Depuis peu, des « dresseurs »,');
    writeln ('le nom qu’on utilise pour les gens pouvant contrôler des geekemon,');
    writeln('nous attaque ici au département informatique. ');
    readln;
    effacerEcran;
    writeln('Ils ont tous l’air d’avoir perdu la raison…');
    readln;
    effacerEcran;
    writeln('Nos espions ont confirmé qu’ils venaient du département Génie Biologique. ');
    readln;
    effacerEcran;
    writeln('Des geekemons sans dresseur pullulent dans l’IUT… ');
    readln;
    effacerEcran;
    writeln('Et des dresseurs fous ont établis une base ici, au sein même du département informatique!');
    writeln('Nous essayons désespérément d’y accéder pour comprendre la cause de ses évènements étranges.');
    readln;
    effacerEcran;
    writeln('Accepterais-tu de nous aider ? ');
    writeln ('Peut-être pourras-tu retrouver la mémoire de cette façon… »');
    readln;
    effacerEcran;
    deplacerCurseurXY(25,10);
    couleurTexte(15);
    writeln ('Vous hésitez');
    attendre(600);
    deplacerCurseurXY(38,10);
    writeln('.');
    attendre(800);
    deplacerCurseurXY(39,10);
    writeln('.');
    attendre(800);
    deplacerCurseurXY(40,10);
    writeln('.');
    attendre(900);
    effacerEcran;
    couleurTexte(11);
    writeln ('« Je te laisse un temps de décision.');
    readln;
    effacerEcran;
    writeln ('En attendant, souhaites-tu apprendre à contrôler un geekemon ?');
    writeln ('Nous pouvons t’en donner un. »');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Vous acquiescez, puis demandez :');
    readln;
    effacerEcran;
    couleurTexte(12);
    writeln ('« Comment fonctionnent ces bracelets ? »');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('Ils contiennent des geekemons transférés depuis un pc. Tu peux en contrôler jusqu’à 4. ');
    writeln ('Chaque geekemon sauvage sauvage que tu rencontreras pourra être capturé,');
    readln;
    effacerEcran;
    writeln ('Suis-moi, nous allons au secrétariat pour choisir ton premier geekemon ».');
    readln;
    effacerEcran;
    carteSecretariat ();
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Vous entrez la salle adjacente.');
    writeln ('Une femme d’une trentaine d’années se tient devant vous.');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('« C’est l’occasion de te présenter Thérèse, qui gère les geekemons');
    writeln ('non utilisés depuis ce PC.');
    readln;
    effacerEcran;
    writeln ('Combien de geekemons nous reste-t-il ? »');
    readln;
    effacerEcran;
    couleurTexte(14);
    writeln ('« Nous en avons encore 3 »');
    writeln ('Chanceux jeune homme, ils ont tous l''air de vouloir t''adopter!»');
    readln;   *)
    deplacerCurseurXY(0,16);
    couleurTexte(15);
    writeln ('   Stella');
    deplacerCurseurXY(25,16);
    attendre(800);
    writeln ('   Joffrey Baratheon');
    deplacerCurseurXY(48,16);
    attendre(800);
    writeln ('   San Goku');
    attendre(800);
  end;

//////////////////////////////
procedure scenarIntroduction2(var geekedex : arrayOfGeekemon; var geekEquipe : arrayOfEquipe; var nbPotion : integer; var DressEquipe : arrayOfEquipeDresseur);

begin
  effacerEcran;
  couleurTexte(15);
  writeln ('Elle connecte votre bracelet au PC.');
  readln;
  effacerEcran;
  couleurTexte(11);
  writeln ('Pour en revenir à la proposition que je t’ai faite plus tôt… as-tu fais un choix ?');
  readln;
  effacerEcran;
  writeln ('Souhaites-tu nous aider ? »');
  readln;
  couleurTexte(15);
  writeln ('Après une rapide réflexion, vous hochez la tête.');
  readln;
  effacerEcran;
  writeln ('Alexis sourit.');
  readln;
  effacerEcran;
  couleurTexte(11);
  writeln ('Ton aide nous sera précieuse. Voici le plan de l''IUT.');
  readln;
  carte(geekedex, geekEquipe, nbPotion, DressEquipe);
  readln;
  effacerEcran;
  writeln ('« La cafétéria est sous notre contrôle.');
  readln;
  effacerEcran;
  writeln ('Nous l’utilisons bien évidemment pour nous ressourcer en nourriture');
  writeln ('mais également faire des combats entre nous.');
  readln;
  effacerEcran;
  writeln ('Je te conseille cependant de faire un tour des lieux pour compléter et entraîner et ton équipe. »');
  readln;
  effacerEcran;
  couleurTexte(15);
  writeln ('Vous acquiescez.');
  readln;
  effacerEcran;

end;

//////////////////////////////
procedure tutoriel();

var
  choixAction : integer;
  choixTexte : integer;
  fin : boolean;
  Ganon : Ganondorf;
  Jon : JonSnow;
  premierePotion : boolean;
  premiereAttaque : boolean;

begin

effacerEcran;

randomize();

//initialisation
Ganon.ATQ := 8 + random(5);
Ganon.PV := 40;

Jon.ATQ := 10 + random(5);
Jon.PV := 80;

fin := false;
premiereAttaque := true;
premierePotion := true;

writeln('Ganondorf veut se battre.');
readln;
effacerEcran;
writeln ('Jon Snow, à toi!');
readln;
effacerEcran;

  while fin = false do
  begin
  couleurTexte(11);
  writeln('Ordonne à Jon Snow d''attaquer cet ennemi!');
  couleurTexte(15);
  writeln ('Que souhaitez- vous faire ?');
  writeln ('1 - Attaquer');
  writeln ('2 - Demander conseils');
  if premiereAttaque = false then
  writeln ('3 - Utiliser une potion');
  if premiereAttaque = true then
  choixAction := readVerif(1,2)
  else choixAction := readVerif(1,3);
  effacerEcran;

    case choixAction of
    1 : begin

      if premiereAttaque then
      begin
        couleurTexte(11);
        writeln('Bonne initiative, Jon Snow est très puissant et va affaiblir Ganondorf en l''attaquant.');
        attendre(3500);
        write('Regarde attentivement :');
        readln;
        couleurTexte(15);
      end;

      writeln('Jon Snow attaque, cela inflige ', Jon.ATQ, ' dégats au Ganondorf ennemi.');
      Ganon.PV := Ganon.PV - Jon.ATQ;

      if premiereAttaque then
      begin
        readln;
        effacerEcran;
        couleurTexte(11);
        write('En perdant des PV, le geekemon s''affaiblit, s''il atteint 0, il tombe KO.');
        readln;
        writeln ('Et si tu arrives a descendre assez les PV de ganondorf, nous gagnerons ce combat!');
        attendre(800);;
        write('FAIS ATTENTION!');
        attendre(800);
        readln;
        effacerEcran;
        couleurTexte(15);
      end;

      if Ganon.PV > 0 then
      begin
        write('Ganondorf attaque, cela inflige ', Ganon.ATQ, ' dégats au Jon Snow.');
        Jon.PV := Jon.PV - Ganon.ATQ;
        readln;

        if premiereAttaque then
        begin
        couleurTexte(11);
        write('Seulement voila, il ne veut pas se laisser faire, et tentera par tous les moyens d''affaiblir aussi ton geekemon.');
        readln;
        writeln('Ici s''engage donc un combat d''usure...');
        readln;
        writeln('De chaque côté, il faut trouver l''équilibre entre attaquer, encaisser, et se régénerer par le biais de potions');
        writeln('que je te laisse utiliser dès maintenant.');
        readln;
        premiereAttaque := false;
        couleurTexte(15);
        end;

        effacerEcran;
      end
      else
      fin := true;
    end;
    2 :
    begin
    couleurTexte(11);
    writeln('Que veux-tu savoir?');
    couleurTexte(15);
    writeln('1 - Comment combattre?');
    writeln('2 - Qui es-tu?');
    writeln('3 - Qui est cet ennemi?');
    writeln('4 - Je veux rentrer chez moi..');
    choixTexte := readVerif(1,4);
    effacerEcran;

    while (choixTexte >= 5) or (choixTexte <= 0) do
    begin
  couleurTexte(11);
    writeln('pardon? Je n''ai pas très bien compris.');
    readln;
    writeln('Que veux-tu savoir?');
    couleurTexte(15);
    writeln('1 - Comment combattre?');
    writeln('2 - Qui es-tu?');
    writeln('3 - Qui est cet ennemi?');
    writeln('4 - Je veux rentrer chez moi..');
    choixTexte := readVerif(1,4);
    effacerEcran;
   end;

    case choixTexte of
  1 : begin
      couleurTexte(11);
      write('Voici Jon Snow, mon fidèle compagnon de route.');
      readln;
      write('Je ne peux pas t''expliquer ce que tu fais ici étant donnée la situatuion!');
      readln;
      write('Mais Jon Snow est fait pour se battre, alors demande lui de te défendre en appuyant sur "1 - Attaquer".');
      readln;
      effacerEcran;
      end;

  2,3,4 : begin
          couleurTexte(11);
          writeln('On n''a pas le temps pour parler de ça, resaisis-toi!');
          couleurTexte(15);
          readln;
          effacerEcran;
          end;
    end;
    end;

    3: begin

      if premierePotion then
      begin
      couleurTexte(11);
        writeln ('Si tu sens que ton geekemon va tomber, le régénérer te fera gagner du temps.');
        writeln ('La clé de la victoire réside dans l''utilisation des potions à bon escient!');
        readln;
        couleurTexte(15);
        premierePotion := false;
        effacerEcran;
      end;

    write('Vous avez rétablit Jon Snow, il retrouve ses PV.');
    Jon.PV := 80;
    readln;
    effacerEcran;
    end;

   end;
   end;
end;
/////////////////////////////
procedure quete(var geekedex : arrayOfGeekemon; var geekEquipe : arrayOfEquipe; var nbPotion : integer; var DressEquipe : arrayOfEquipeDresseur; nom1 : string ; avancement : avancementQuete; nomdresseurs : arrayofdresseurs; equipeStockage : arrayofPc; quitter : integer);

var
  numéroBoss : integer;

begin
  barre;
  effacerEcran;
  if avancement.finPartie1 = true then
  begin
    if avancement.finPartie2 = true then
    begin
      numéroBoss := 3;
      deplacerCurseurXY(25,10);
      writeln ('LA QUETE : PARTIE 3');
      attendre(5500);
      effacerEcran;
      attendre(2000);
      writeln ('Votre café à la main, vous regardez les nuages à travers une des salles de l’ETDDG.');
      readln;
      couleurTexte(11);
      writeln ('Mes amis, j’ai une bonne nouvelle à vous annoncer ');
      writeln ('Nous avons aujourd’hui gagné suffisamment de terrain pour attaquer la base des génie biologique… ');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Des applaudissements se font entendre autour de la table.');
      readln;
      effacerEcran;
      couleurTexte(11);
      writeln ('« Aucun de nous ne sait ce qui nous y attend, mais si nous y allons en nombre, nous avons une grande chance de reprendre la salle. ');
      writeln ('Pierre restera à l’ETDDG pour assurer sa défense. En cas d’urgence, préviens-nous le plus vite possible. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Alors qu’un groupe d’une dizaine de membres de l’ETTDG se prépare au départ, Pierre s’approche de vous.');
      readln;
      effacerEcran;
      couleurTexte(6);
      writeln ('Bon courage ..');
      writeln ('La prise de la base ne sera sans doute pas agréable pour toi… mais nous sommes dans la dernière ligne droite.');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Les membres de l’ETTDG traversent l’IUT à petit pas en direction de la base des génie biologique. ');
      writeln ('Malgré l’ambiance morose, un des membres de l’ETTDG, portant un t-shirt « SQL ROCKS », tente de détendre l’atmosphère.');
      readln;
      effacerEcran;
      couleurTexte(11);
      writeln ('« Pas d’alarme annonçant notre arrivée ? »');
      readln;
      effacerEcran;
      couleurTexte(13);
      writeln ('« C’est étrange en effet », déclare David. « On pourrait croire à un piège. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Le groupe arrive devant la base ennemie.');
      writeln ('D’un signe de tête, Alexis vous encourage à entrer.');
      readln;
      effacerEcran;
      couleurTexte(11);
      writeln ('« C’est terriblement calme »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Vous vous retrouvez dans une grande salle aux nombreuses tables. ');
      writeln ('Un homme d’une trentaine d’années, cheveux courts, au regard narquois, vous fixe du coin de la pièce.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Te voilà enfin , ', nom1,'. Je t’attendais. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Des bruits de pas retentissants se font entendre depuis le couloir.');
      writeln ('Un groupe de dresseurs attaque vos camarades de l’ETDDG. Vous restez désemparé.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Christophe, fais mordre la poussière au vice-trésorier de l’ETDDG, s’il te plaît. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Un jeune homme à la chemise mal boutonnée s’approche.');
      readln;
      effacerEcran;
      couleurtexte(10);
      writeln ('« Très bien ».');
      readln;
      effacerEcran;
      couleurTexte(11);
      writeln ('« Je n’avais pas anticipé un tel guet-apens… » déclare Alexis. ');
      writeln ('« ', nom1, ' ! Occupes-toi du type ! »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Alors qu’Alexis entame le combat, vous lancez un regard empli de fureur et de perplexité à l’homme en face de vous.');
      readln;
      effacerEcran;
      couleurtexte(14);
      writeln ('« J’ai à te parler », annonce t’il. « Suis-moi ».');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Et pourquoi ne vous terrasserais-je pas sur le champ ? » rétorquez-vous.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Car tu es ici pour comprendre l’origine du chaos qui s’est abattu sur l’IUT, si je ne m’abuse. ' );
      writeln ('Tu peux m’affronter ici même, mais cette guerre ne cessera pas. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Ne sachant quoi répondre devant la véracité des paroles de l’homme,');
      writeln ('vous décidez de le suivre dans la salle adjacente, bien plus petite.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Très bien. J’imagine que tu as entendu parler du scientifique ');
      writeln ('qui a créé la technologie de clonage pour les geekemons ? »');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« … on m’en a touché deux mots, oui. »');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Il s’agit de l’homme sur cette photo, désormais décédé. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Il vous tend une photographie, sur laquelle vous voyez nul autre que la personne en face de vous! ');
      readln;
      effacerEcran;
      writeln ('Vous restez incompréhensif.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Ce scientifique… Il est décédé en créant un geekemon qui serait son propre clone, ' );
      writeln ('ce qui est également à l’origine de la dévastation de l’IUT. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Après un temps de réflexion, vous répondez :');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Je sais que vous êtes un clone. Mais cela explique encore peu de choses. ');
      readln;
      effacerEcran;
      writeln ('Pourquoi ma soeur est-elle de votre côté ? ');
      readln;
      effacerEcran;
      writeln ('Pourquoi me suis-je réveillé à l’extérieur de l’IUT avant que l’ETDDG ne me récupère ? ');
      readln;
      effacerEcran;
      writeln ('Et comment avez-vous su précisément que nous attaquerions maintenant ? »');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Pierre est un espion. En ce moment même, la salle de l’ETDDG m’appartient. ');
      writeln ('Et ta « soeur » est avec lui. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Vous refusez de croire à ces paroles. Un nuage de confusion s’abat sur votre esprit.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Cette soeur n’est d’ailleurs qu’un clone de la vraie, que j’ai moi-même créé. ');
      readln;
      effacerEcran;
      writeln ('Pierre t’a envoyé l’affronter pour commencer à semer le doute dans ton esprit. ');
      readln;
      effacerEcran;
      writeln ('Allais tu rester fidèle à l’ETDDG pour toujours? ');
      readln;
      effacerEcran;
      attendre(1000);
      deplacerCurseurXY(25,10);
      writeln ('Je veux que tu me rejoignes, ');
      attendre(1000);
      deplacerCurseurXY(55,10);
      writeln (nom1, ' . »');
      attendre(2500);
      effacerEcran;
      couleurTexte(12);
      writeln ('« Vous avez cloné ma soeur et vous osez me demander de vous rejoindre… ');
      readln;
      effacerEcran;
      writeln ('J’imagine que les autres dresseurs fous dans cet IUT sont également des clones de votre fabrication… ');
      writeln ('Qu’avez-vous fait des humains ? Et qu’ai-je de si particulier à vos yeux ? »');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Les humains qui ont été clonés sont dans un coma contrôlé. ');
      writeln ('Ta « vraie » soeur est encore vivante, rassure-toi. ');
      readln;
      effacerEcran;
      writeln ('Mais pourquoi accorder tant d’importance à la différenciation entre les clones et les humains ? ');
      writeln ('Après tout, nous sommes identiques… »');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Abrégez ! »');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Tu es un dresseur exceptionnel, ', nom1, ' .');
      readln;
      effacerEcran;
      writeln ('Selon les dires de Pierre, nul autre que toi n’arrive mieux à contrôler la technologie que j’ai créé.');
      readln;
      effacerEcran;
      writeln ('J’ai besoin de toi pour la perfectionner. ');
      writeln ('Les membres de l’ETTDG ne sont que nuisibles. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Vous regardez l’homme en vous mordant les lèvres.');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Si je suis si doué que ça, laissez-moi vous prouvez que je peux vous terrasser à votre propre jeu. ');
      writeln ('Faisons un combat de geekemons. ');
      readln;
      effacerEcran;
      writeln ('Si vous perdez, vous désertez définitivement les lieux, vous et vos clones bien dressés. ');
      readln;
      effacerEcran;
      writeln ('Sinon… je vous aiderais. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('L’homme semble intrigué.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Le sort de beaucoup de choses dépendrait de ce simple combat… ');
      readln;
      effacerEcran;
      writeln ('Tu aimes jouer avec le feu, à ce que je vois. ');
      readln;
      effacerEcran;
      writeln ('Heureusement pour toi, je suis joueur également.');
      readln;
      effacerEcran;
      attendre(1000);
      deplacerCurseurXY(25,10);
      writeln ('Alea');
      attendre(1100);
      deplacerCurseurXY(31,10);
      writeln ('jacta');
      attendre(1100);
      deplacerCurseurXY(37,10);
      writeln ('est… »');
      attendre(2000);
      effacerEcran;
      couleurTexte(15);
      choixBoss (geekedex, geekEquipe, nbPotion, DressEquipe, nom1, avancement, nomdresseurs, numéroBoss, equipeStockage, quitter);
      attendre(1000);
      writeln ('L’homme inconnu vous observe longuement, l’air satisfait.');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Pierre ne m’avait pas menti. Je ne suis donc plus digne de ma propre création. ');
      readln;
      effacerEcran;
      writeln ('Comme promis, je vais quitter ces lieux. ');
      readln;
      effacerEcran;
      writeln ('Une personne telle que toi me paraît toujours idéale pour perfectionner ma technologie, j’admets cette défaite.');
      readln;
      effacerEcran;
      writeln ('J’espère quand même que tu n’abandonneras pas les geekemons par le futur… »');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« L’IUT doit revenir à son état d’antan. »');
      readln;
      effacerEcran;
      couleurTexte(14);
      writeln ('« Qu’il en soit ainsi. Je libérerais les humains que j’ai cloné.' );
      readln;
      effacerEcran;
      writeln ('Ta soeur se trouve au département génie biologique. » ');
      readln;
      effacerEcran;
      couleurTexte(15);
      deplacerCurseurXY(25,10);
      writeln ('EPILOGUE');
      attendre(5500);
      effacerEcran;
      attendre(1000);
      deplacerCurseurXY(25,10);
      writeln ('Vous rentrez dans une salle où se trouvent de nombreuses personnes, ');
      deplacerCurseurXY(25,11);
      writeln ('allongées sur des lits, avec des masques sur le visage. ');
      attendre(2500);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Après avoir marché un peu, vous l’apercevez enfin. Votre soeur. ' );
      attendre(2500);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Des souvenirs vous reviennent en tête. Un flash sur le parking.  ');
      attendre(2500);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Des dresseurs enlevant votre soeur puis fuyant face aux geekemons sauvages. ');
      attendre(3000);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Votre perte de conscience.');
      attendre(2200);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Vous ôtez doucement le masque de son visage. ');
      attendre(3500);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Une lueur d’espoir vous agrippe au coeur. Ce n’est pas un clone. ' );
      attendre(4500);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('Alors qu’elle ouvre les yeux, une larme coule des vôtres,');
      attendre(2500);
      effacerEcran;
      deplacerCurseurXY(25,10);
      writeln ('et vous retirez votre bracelet.');
      attendre(3500);
      effacerEcran;
      attendre(3000);
      deplacerCurseurXY(25,10);
      writeln ('Félicitations !  Vous avez fini la quête principale du jeu.');
      writeln;
      attendre (6000);
      changementDeSalle(geekedex, geekEquipe, nbPotion, DressEquipe, nom1, avancement, nomDresseurs, equipeStockage, quitter);


    end
    else
    begin
      deplacerCurseurXY(25,10);
      numéroBoss := 2;
      writeln ('LA QUETE : PARTIE 2');
      attendre(3500);
      effacerEcran;
      writeln ('Alors que vous sirotez tranquillement un café dans un coin de la salle de l’ETTDG,');
      writeln ('vous voyez vos trois amis entrer soudainement. Vous demandez :');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Que se passe-t-il ? »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Pierre vous fait signe de venir à part.');
      readln;
      effacerEcran;
      couleurTexte(6);
      writeln ('« La bonne nouvelle, c’est que nous avons envoyé des éclaireurs vers l’accueil et constaté qu’il était peu gardé… ');
      readln;
      effacerEcran;
      writeln ('La mauvaise… C’est qu’il est gardé par une dresseuse très puissante… »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Pierre prend un temps d’arrêt, l’air gêné. Vous vous impatientez.');
      readln;
      attendre(1000);
      effacerEcran;
      deplacerCurseurXY(25,10);
      couleurTexte(6);
      writeln ('« Cette dresseuse…');
      deplacerCurseurXY(44,10);
      attendre(2000);
      writeln ('ce n’est autre que ta sœur ');
      attendre(200);
      deplacerCurseurXY(72,10);
      writeln('.');
      attendre(800);
      deplacerCurseurXY(73,10);
      writeln('.');
      attendre(800);
      deplacerCurseurXY(74,10);
      writeln('.');
      attendre(2500);
      effacerEcran;
      attendre(1000);
      writeln ('Nous n’avions pas osé te l’avouer jusqu’à maintenant par peur que tu rejoignes son camp, et nous avions vraiment besoin de toi. ');
      readln;
      effacerEcran;
      writeln ('J’espère que tu ne nous en voudras pas… ».');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Après un instant de réflexion, vous décidez de rester fidèle aux membres de l’ETTDG.' );
      writeln ('Puisque le visage de votre sœur n’est pas ancré dans votre mémoire.');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Très bien, J’imagine que je dois aller l’affronter… »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Alexis, qui avait discrètement écouté la conversation, s’approche de vous.');
      readln;
      effacerEcran;
      couleurTexte(11);
      writeln ('« C’est essentiel. L’accueil est un emplacement crucial pour accéder à la base des GB. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Vous hochez gravement la tête.');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Très bien, j’irais ».');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Alors que vous vous dirigez vers l’accueil, vous sentez soudain vos souvenirs revenir du néant… ' );
      readln;
      effacerEcran;
      writeln ('Votre sœur était étudiante en biologie. ' );
      readln;
      effacerEcran;
      writeln ('Vous vous souvenez que vous étiez tous les deux étudiants en première année à l’IUT, vous en informatique.');
      readln;
      effacerEcran;
      writeln ('Alors que vous vous rapprochez de l’accueil, vous apercevez une silhouette de dos,');
      writeln ('féminine, comme méditant à la lumière d’une ampoule. ');
      readln;
      effacerEcran;
      writeln ('Elle se retourne et vous adresse un sourire. C’est bien elle. ');
      readln;
      effacerEcran;
      writeln ('Ses traits vous reviennent comme s’ils n’avaient jamais quitté votre mémoire.');
      readln;
      effacerEcran;
      couleurTexte(9);
      writeln ('« Bonsoir,', nom1, ' » déclare t-elle.');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Comment te souviens-tu de moi ? » rétorquez-vous.');
      readln;
      effacerEcran;
      writeln ('« Les rebelles de l’ETTDG disent que nous sommes fous, mais la folie est relative.');
      readln;
      effacerEcran;
      writeln ('Je me rappelle très bien de nous deux et de notre passé.');
      readln;
      effacerEcran;
      writeln ('Alors que toi, tu as perdu la mémoire, n’est-ce pas ? Qui croire dans tout ça ? »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Vous lui lancez un regard se voulant méprisant, mais empreint d’amertume.');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Je ne sais qui croire. Je me souviens à peine de toi,');
      writeln ('tandis que l’ETTDG m’a aidé jusqu’à présent.');
      readln;
      effacerEcran;
      writeln ('Pourquoi te ferais-je confiance ? »');
      readln;
      effacerEcran;
      couleurTexte(9);
      writeln ('« Ils t’ont envoyé m’affronter et t’ont caché que ta sœur était à l’IUT. »');
      readln;
      effacerEcran;
      couleurTexte(12);
      writeln ('« Et bien dans ce cas, affrontons-nous. L’issue du combat décidera peut-être de beaucoup. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      choixBoss (geekedex, geekEquipe, nbPotion, DressEquipe, nom1, avancement, nomdresseurs, numéroBoss, equipeStockage, quitter);
      effacerEcran;
      couleurTexte(15);
      attendre(1000);
      writeln ('Dame Rolland de Ravel vous regarde avec une pointe de tristesse dans les yeux.');
      readln;
      effacerEcran;
      couleurTexte(9);
      writeln ('« Tu es digne de moi, petit frère. ');
      readln;
      effacerEcran;
      writeln ('C’est à toi de décider pour quel camp tu veux te battre, mais quoi qu’il en soit, nous sommes destinés à nous recroiser. »');
      readln;
      effacerEcran;
      couleurTexte(15);
      writeln ('Elle tourne les talons.' );
      readln;
      effacerEcran;
      writeln ('L’esprit confus, vous prévenez l’ETDDG que vous avez pris l’accueil.');
      readln;
      effacerEcran;
      avancement.finPartie2 := true;
      changementDeSalle(geekedex, geekEquipe, nbPotion, DressEquipe, nom1, avancement, nomDresseurs, equipeStockage, quitter);

    end;

  end
  else
  begin
    deplacerCurseurXY(25,10);
    writeln ('LA QUETE : PARTIE 1');
    numéroBoss := 1;
    attendre(5500);
    writeln ('Vous vous réunissez dans la salle de l’ETTDG avec 3 autres des rebelles. ' );
    writeln ('On y trouve Alexis, un petit moustachu et un homme d’une certaine corpulence.');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('« Bien, je vois que tu as gagné en expérience… Je te présente Pierre, notre éclaireur,');
    writeln ('et David, le chef de notre groupe de résistance ».');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Les deux hochent respectivement la tête.');
    readln;
    effacerEcran;
    couleurTexte(11);
    writeln ('« Nous avons pour objectif aujourd’hui de prendre la salle 149 », continue Alexis.');
    readln;
    effacerEcran;
    writeln ('« Elle contient des ressources essentielles au stockage des geekemons… ');
    readln;
    effacerEcran;
    writeln ('Malheureusement, elle est en ce moment occupée par quelques étudiants en biologie qui nous ont déjà fait mordre la poussière par le passé… ');
    readln;
    effacerEcran;
    writeln ('Ton renfort sera le bienvenu. »');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Alors que vous vous apprêtez au départ, Pierre s’approche de vous et vous serre la main.');
    readln;
    effacerEcran;
    couleurTexte(6);
    writeln ('« Enchanté! Au fait, il me semble qu’Alexis t’ait caché quelque chose… ' );
    readln;
    effacerEcran;
    writeln ('La folie des étudiants en biologie se répand tel un virus, et a touché nombre d’étudiants en informatique. ');
    writeln ('L’ETTDG est le seul bastion de résistance à l’IUT. Histoire que tu n’aies pas de mauvaises surprises… »');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Vous le regardez, d’un air suspect, ne sachant quoi penser.');
    readln;
    effacerEcran;
    writeln ('Alors que vous et votre équipe vous dirigez vers la salle 149, une alarme retentit.');
    readln;
    effacerEcran;
    couleurTexte(13);
    writeln ('« C’est un système mis en place par le département génie biologique pour signaler l’avancement de nos équipes », avance David.');
    readln;
    effacerEcran;
    writeln ('« Nous avons été repérés. »');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Alors que vous vous approchez de la salle, un jeune homme, grand et à la peau noire en sort brusquement,');
    writeln ('entouré de trois autres dresseurs.');
    readln;
    effacerEcran;
    writeln ('Son air vous est familier. Les membres de l’ETDDG vous jettent un regard en biais.');
    readln;
    effacerEcran;
    couleurTexte(8);
    writeln ('« Admirez le seigneur Phemius »');
    readln;
    effacerEcran;
    writeln ('« Votre détermination à voler nos ressources n’a d’égal que votre incapacité à le faire. »');
    readln;
    effacerEcran;
    couleurTexte(15);
    choixBoss (geekedex, geekEquipe, nbPotion, DressEquipe, nom1, avancement, nomdresseurs, numéroBoss, equipeStockage, quitter);
    effacerEcran;
    writeln ('Seigneur Phemius a l’air totalement désespéré.');
    readln;
    effacerEcran;
    couleurTexte(8);
    writeln ('« C’est ainsi que l’ETDDG a recruté un dresseur digne de ce nom… Voilà qui est fort étrange. Qui es-tu ? »');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Vous refusez de répondre.');
    readln;
    effacerEcran;
    couleurTexte(8);
    writeln ('« Intéressant, intéressant … » déclare Phemius. « Voilà un évènement qui va faire le tour de l’IUT… ».');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('Les quatre dresseurs adverses quittent la salle.');
    readln;
    effacerEcran;
    writeln ('L’esprit troublé, vous annoncez :');
    readln;
    effacerEcran;
    couleurTexte(12);
    writeln ('« Qui était cet homme ? »');
    readln;
    effacerEcran;
    couleurTexte(6);
    writeln ('« … un des étudiants en IQS1 », annonce Pierre. Il a rejoint l’ennemi. »');
    readln;
    effacerEcran;
    couleurTexte(12);
    writeln ('« Il me rappelait vaguement quelqu’un… comme un rêve à demi oublié… un ami ? »');
    readln;
    effacerEcran;
    couleurTexte(15);
    writeln ('David prend un air grave.');
    readln;
    effacerEcran;
    couleurTexte(13);
    writeln ('« Nombre de nos amis ici sont passés du côté des GB. On ne peut rien contre tout ça malheureusement…');
    writeln ('si ce n’est trouver la source du mal. »');
    readln;
    effacerEcran;
    couleurTexte(15);
    avancement.finpartie1 := true;
    changementDeSalle(geekedex, geekEquipe, nbPotion, DressEquipe, nom1, avancement, nomDresseurs, equipeStockage, quitter);
  end;
end;

function readVerif(min : integer; max : integer) : integer;
var
  res : integer;
begin
  readln(res);
  while (res<min) or (res>max) do
  begin
    writeln('Saisissez un nombre entre ',min,' et ',max,'.');
    readln(res);
  end;
  result:= res;
end;

end.
